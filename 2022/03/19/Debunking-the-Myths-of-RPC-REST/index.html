<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Debunking the Myths of RPC&amp;REST | 0x80x17</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Debunking the Myths of RPC&amp;REST</h1><a id="logo" href="/.">0x80x17</a><p class="description">hello, world:)</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Debunking the Myths of RPC&amp;REST</h1><div class="post-meta">2022-03-19</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div></div></div><div class="post-content"><p>本文为翻译文章，原文链接为:<a target="_blank" rel="noopener" href="http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/">Debunking the Myths of RPC &amp; REST</a></p>
<p>网上有很多关于 RPC 和 REST 的文章，博客与讨论，但是大部分都在回答某一个特定的应用下，应该选择使用 RPC 还是 REST，而这本身并不是一个正确的二分法。这些回答普遍没有解释我想要知道的问题，而是让我感觉到大部分的开发者并不懂为什么要使用 REST，仅仅是因为觉得这个架构听起来很酷。讽刺的是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Roy_Fielding">Roy Fielding</a>在介绍 REST 的论文中就提到了这种**”design by fad”**</p>
<blockquote>
<p>“Consider how often we see software projects begin with adoption of the latest fad in architectural design, and only later discover whether or not the system requirements call for such an architecture.”</p>
</blockquote>
<span id="more"></span>

<p>如果你想深入了解 REST 而且只能读一篇文档，那不要阅读本文，去参考 Fielding 的论文 <a target="_blank" rel="noopener" href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">DISSERTATION</a>。如果你没有时间或者只是想在更高的层面上了解 RPC 和 REST，那么可以继续阅读，在开始之前，我们先来看下 RPC，REST 和 HTTP 的一些细节</p>
<p><strong>Remote Procedure Call(RPC)<strong>是一种允许你调用其他进程的方法并且通过通信来交换数据。通常会在客户端生成方法 stub，使用 stub 使得调用看起来更像本地调用，而实际上在 stub 背后会包装请求然后把请求发送到服务端，服务端进程会解析这个请求并且调用客户端想要调用的方法，然后再反向的把这个调用的执行结果返回给客户端。</strong>HTTP 协议有时会是底层的通信协议，但是 RPC 并不强制要求一定使用 HTTP 协议。</strong>远程方法调用(RMI)和 RPC 更相近，RMI 比 RPC 的远程调用更进一步，它更加面向对象，可以保存远程对象的引用并且调用这个对象的相关方法</p>
<p><strong>Representational State Transfer(REST)是一种架构方式，通过对接口进行一系列限制来实现一些目标。</strong>REST 强制使用客户端／服务器模型，客户端获取和操作由服务端管理的各种资源，服务端通过提供各种资源的状态来告诉客户端相关资源的信息，同时提供获取资源最新状态和操作这些资源的方法。客户端和服务端所有的交互必须是无状态的和可缓存的。实现了 REST 的架构就被成为 RESTful</p>
<p>**Hypertext Transfer Protocol(HTTP)**是一个 RESTful 的协议，可以在分布式环境下暴露相应的资源。在 HTTP 协议中，服务端通过 HTTP 响应的 body 告诉客户端这些资源的信息。如果 body 是 HTML 的话，那么后续合法的操作会给出在 A 标签里，让客户端要么通过 GET 请求获取新的资源状态，要么通过 POST &#x2F; PUT 或者 DELETE 请求来操作这些资源</p>
<p>通过以上这些定义，我们可以得出下面结论：</p>
<ul>
<li><strong>把 RPC 和 REST 作类比是没有道理的</strong>。事实上你可以通过在任何 RPC 实现的基础上构建 RESTful 的服务（比如 dubbo 作为 RPC 框架就可以支持 RESTful 的服务），只要创建遵守 REST 架构限制的方法即可。你甚至可以基于 RPC 的实现构建 HTTP 风格的 REST 架构，你需要做的就是通过实现相应的 GET,POST,PUT,DELETE 方法来把 HTTP 请求头和请求体的数据提取并转化到 RPC 的调用</li>
<li><strong>HTTP 和 REST 不是一对一的关系，HTTP 是 REST 一种实现方式</strong>。REST 是由一组限制构成，但是并没有包括 HTTP 实现方面的限制。例如你的服务可以不使用 HTTP 协议来暴露接口仍然可以是RESTful 的</li>
</ul>
<p>事实上当人们在问他们是否应该用 RPC 或者 REST 时，真正想要问的是<strong>我应该通过 HTTP 协议实现的 RESTful 服务来对外暴露我的资源，还是我应该使用像 SOAP 或者 XML－RPC 这样更定制化的方式来构建更高一层的抽象</strong>。要回答这个问题，我们首先来看一下 REST 和 HTTP 的优点，注意，虽然我们分开来说为什么你要使服务 RESTful 和为什么你要使用 HTTP 协议，然而前者的观点对于后者也是适用的(反之则不适用)</p>
<p><strong>REST 架构的优点在于任何状态下的合法行为都是被服务端控制的，只需要制定很少的与客户端的约定。</strong>就 HTTP 协议实现的 REST 架构来说，服务端与客户端之间的约定仅仅是顶层的 URI，我可以使用这个 URI 来发送一个 GET 请求。从这里也可以看出，这些服务端对于客户端的限制是在运行时的。相比之下，传统的 RPC 限制更为严格，服务端定义的需要被客户端消费的程序在构建时就要被明确定义好（比如通常作为二方包由消费端引入）。为了方便理解，可以比较通过页面导航来找到需要的商品(通过调用服务端提供各种链接)和直接通过产品的名字来获取这个产品。在第一种方式中，API 的变化完全是由服务端来控制的，但是在第二种情况下需要协同部署客户端与服务端。这个例子中很明显的问题在于计算机本身并不能很好的以动态的形式处理 API（但是大部分场景下也是可以实现的，比如通过动态代理），所以如果你正在构建一个被其他服务消费的服务，你很难获得由服务端来控制行为的好处（一旦服务导出，修改服务就需要考虑兼容性的问题）</p>
<p>使用 HTTP 协议来暴露资源的一个很大的好处在于，你可以使用很多专门为 HTTP 协议开发的工具而不需要额外进行开发。我们来考虑下使用缓存的例子，因为 HTTP 请求的输入是被良好定义的(query string,HTTP headers,POST data)，所以我可以在我的服务前面加一个中间层<a target="_blank" rel="noopener" href="http://www.squid-cache.org/">Squid</a> 来实现缓存处理。如果使用 RPC，即使 RPC 的通信协议使用 HTTP，我们无法保证消息和远程调用是一对一的，因为一个远程调用可能需要传入多个消息，而且 RPC 的输入可以使用标准的方式也可以不使用，这就让能否为请求缓存处理结果存在不确定性，而请求中也可能不存在相关的缓存处理的元数据(而 HTTP <a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html">dose</a>)。<strong>通过使用 HTTP 协议我们可以避免重新造一些轮子，站在其他人的肩膀上</strong></p>
<p>使用 HTTP 协议的另一个好处就是它通过一种很通用的<a target="_blank" rel="noopener" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">方式</a>，GET,POST&#x2F;PUT 和 DELETE 来暴露资源，并且这些都经过了时间的检验。在实际开发中如果你按照自己的方式来暴露资源，很可能会出现暴露的接口语义过于狭窄而不能很好的支持将来的需求，而这会导致你的方法，接口或者服务过分膨胀，并最终成为你的 SOA 的一部分。关于这一点其实就可以单独写一篇文章来说明，所以在这一篇文章中就不深入的探讨了。</p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>本文标题：</span>Debunking the Myths of RPC&amp;REST</p><p><span>文章作者：</span>Ryan</p><p><span>原始链接：</span><a href="/2022/03/19/Debunking-the-Myths-of-RPC-REST/">https://0x80x17.tech/2022/03/19/Debunking-the-Myths-of-RPC-REST/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://0x80x17.tech/2022/03/19/Debunking-the-Myths-of-RPC-REST/"></i></span></p><p><span>版权声明：</span>转载或引用请注明本文链接🔗</p></div><br><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" rel="tag">分布式系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BF%BB%E8%AF%91/" rel="tag">翻译</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1/" rel="tag">设计</a></li></ul></div><div class="post-nav"><a class="pre" href="/2022/04/05/%E5%9B%9E%E8%B0%83%E5%8F%8A%E5%9C%A8-Java%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/">回调及在 Java中的使用</a><a class="next" href="/2022/03/03/%E5%8F%8D%E8%BD%AC%E5%8D%95%E9%93%BE%E8%A1%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E7%BB%8F%E5%85%B8%E6%80%9D%E8%B7%AF/">反转单链表的三种经典思路</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://0x80x17.tech"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.png"/></a><p>A Lean Coder.</p></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">设计</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">分布式系统</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 15px;">翻译</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">工具</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 15px;">虚拟机</a> <a href="/tags/%E7%BA%BF%E7%A8%8B-%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">线程&并发</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/" style="font-size: 15px;">数据结构&算法</a> <a href="/tags/%E7%BB%8F%E9%AA%8C%E6%95%99%E8%AE%AD/" style="font-size: 15px;">经验教训</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 15px;">语法</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" style="font-size: 15px;">数据存储</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 15px;">中间件</a> <a href="/tags/JS/" style="font-size: 15px;">JS</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 15px;">安全</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 15px;">优化</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2023/09/07/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">位图与布隆过滤器</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/08/11/%E5%85%B3%E4%BA%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">关于负载均衡</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/07/24/%E5%85%B3%E4%BA%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">关于流量控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/06/19/Redis-%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">Redis 中的数据结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/28/%E5%85%B3%E4%BA%8E-Skip-list/">关于 Skip list</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/05/DNS-%E6%A6%82%E8%BF%B0/">DNS 概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/30/%E7%86%94%E6%96%AD-%E9%99%8D%E7%BA%A7/">熔断&降级</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/19/%E5%85%B3%E4%BA%8E%E5%A4%9A%E6%80%81/">关于多态</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/03/%E8%81%8A%E8%81%8A%E5%B9%82%E7%AD%89/">聊聊幂等</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/19/Java-ThreadLocal%E8%A7%A3%E6%9E%90-2/">Java ThreadLocal解析(2)</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">0x80x17.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>