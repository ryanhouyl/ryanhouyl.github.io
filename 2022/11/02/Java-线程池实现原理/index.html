<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Java çº¿ç¨‹æ± å®ç°åŸç† | 0x80x17</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Java çº¿ç¨‹æ± å®ç°åŸç†</h1><a id="logo" href="/.">0x80x17</a><p class="description">hello, world:)</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Java çº¿ç¨‹æ± å®ç°åŸç†</h1><div class="post-meta">2022-11-02</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-text">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">å®ç°çº¿ç¨‹æ± è¦è€ƒè™‘çš„é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ThreadPoolExecutor%E7%9A%84%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">ThreadPoolExecutorçš„ä»£ç åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Executor%E6%8E%A5%E5%8F%A3"><span class="toc-text">Executoræ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">çº¿ç¨‹æ± çš„çŠ¶æ€ç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%8E%A7%E5%88%B6%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%95%B0"><span class="toc-text">å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#execute%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">executeæ–¹æ³•çš„å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-text">åˆ›å»ºçº¿ç¨‹æ± </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#workQueue%E7%9A%84%E6%8E%92%E9%98%9F%E7%AD%96%E7%95%A5"><span class="toc-text">workQueueçš„æ’é˜Ÿç­–ç•¥</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± "><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± " class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± "></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± </h2><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œä¸€èˆ¬æ˜¯å…ˆç¼–å†™å®ç°ä»»åŠ¡çš„ä»£ç (ä»»åŠ¡ç±»ä¸€èˆ¬å®ç°<code>Runnable</code>æ¥å£)ï¼Œç„¶åä¸ºæ¯ä¸ªä»»åŠ¡å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹(<code>Thread</code>ç±»)ï¼Œæ¥ä¸‹æ¥ç”±ç³»ç»Ÿè´Ÿè´£å®Œæˆçº¿ç¨‹é—´çš„è°ƒåº¦ã€‚å‡è®¾ä»»åŠ¡å¾ˆå¤šï¼Œè€Œä¸”æ‰§è¡Œæ—¶é—´ä¸é•¿ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„çº¿ç¨‹ï¼Œ<strong>ä¼šä½¿çº¿ç¨‹é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥çº¿ç¨‹æ± ï¼Œæ§åˆ¶çº¿ç¨‹åˆ›å»ºçš„æ•°ç›®ï¼Œå°½é‡çš„ä½¿çº¿ç¨‹å¯ä»¥å¤ç”¨ã€‚</strong></p>
<h2 id="å®ç°çº¿ç¨‹æ± è¦è€ƒè™‘çš„é—®é¢˜"><a href="#å®ç°çº¿ç¨‹æ± è¦è€ƒè™‘çš„é—®é¢˜" class="headerlink" title="å®ç°çº¿ç¨‹æ± è¦è€ƒè™‘çš„é—®é¢˜"></a>å®ç°çº¿ç¨‹æ± è¦è€ƒè™‘çš„é—®é¢˜</h2><ul>
<li>çº¿ç¨‹æ± è‡ªèº«çš„çŠ¶æ€å¦‚ä½•ç®¡ç†ï¼Ÿæ¯”å¦‚ running, shutdown ç­‰</li>
<li>å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°ç›®ï¼Ÿ</li>
<li>çº¿ç¨‹æ± å¦‚ä½•æ‰§è¡Œå¾…å¤„ç†çš„ä»»åŠ¡ï¼Ÿ</li>
<li>å¦‚ä½•æ§åˆ¶å¾…æ‰§è¡Œçš„ä»»åŠ¡å’Œçº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Ÿ</li>
</ul>
<span id="more"></span>

<h2 id="ThreadPoolExecutorçš„ä»£ç åˆ†æ"><a href="#ThreadPoolExecutorçš„ä»£ç åˆ†æ" class="headerlink" title="ThreadPoolExecutorçš„ä»£ç åˆ†æ"></a>ThreadPoolExecutorçš„ä»£ç åˆ†æ</h2><p>å…³äºä¸€ä¸ªçº¿ç¨‹æ± çš„å®ç°ï¼Œåœ¨ä¸Šé¢ç»™å‡ºäº†å‡ ä¸ªéœ€è¦é‡ç‚¹å…³æ³¨çš„åœ°æ–¹ï¼Œä¸‹é¢ç»“åˆæºç è¿›è¡Œè§£æ</p>
<h3 id="Executoræ¥å£"><a href="#Executoræ¥å£" class="headerlink" title="Executoræ¥å£"></a>Executoræ¥å£</h3><blockquote>
<p>An object that executes submitted Runnable tasks. This interface provides a way of decoupling task submission from the mechanics of how each task will be run, including details of thread use, scheduling, etc. An Executor is normally used instead of explicitly creating threads.</p>
</blockquote>
<p>è¯¥æ¥å£æŠŠä»»åŠ¡çš„æäº¤å’Œä»»åŠ¡çš„æ‰§è¡Œè¿›è¡Œè§£è€¦ï¼Œè‡³äºå¦‚ä½•æ‰§è¡Œæäº¤çš„ä»»åŠ¡ï¼Œå¯ä»¥æœ‰å¾ˆå¤šä¸åŒçš„å®ç°ï¼Œåœ¨ Oracle æä¾›çš„ API æ–‡æ¡£ä¸­ï¼Œæœ‰è¯¦ç»†çš„æè¿°ã€‚åé¢æˆ‘ä»¬ä¼šè¯¦ç»†äº†è§£ <code>ThreadPoolExecutor</code> æ˜¯å¦‚ä½•å®ç°è¯¥æ¥å£çš„ <code>execute(Runnable command)</code>æ–¹æ³•çš„</p>
<h3 id="çº¿ç¨‹æ± çš„çŠ¶æ€ç®¡ç†"><a href="#çº¿ç¨‹æ± çš„çŠ¶æ€ç®¡ç†" class="headerlink" title="çº¿ç¨‹æ± çš„çŠ¶æ€ç®¡ç†"></a>çº¿ç¨‹æ± çš„çŠ¶æ€ç®¡ç†</h3><p>åœ¨ <code>ThreadPoolExecutor</code>ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªçº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œå¹¶ä¸”æä¾›äº†å¯¹åº”çš„é”ï¼Œæ¥ä¿è¯çŠ¶æ€ä¿®æ”¹çš„åŒæ­¥ï¼ŒåŒæ—¶è¿˜æœ‰ä¸çº¿ç¨‹æ± çŠ¶æ€ç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚<code>shutdown(), shutdownNow()</code>ç­‰ï¼›åœ¨æ‰§è¡Œçº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æ—¶ï¼Œä¹Ÿéœ€è¦å¯¹çº¿ç¨‹æ± çš„çŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œä¸€äº›é‡è¦çš„å­—æ®µå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// runState is stored in the high-order bits</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">RUNNING</span>    <span class="operator">=</span> -<span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHUTDOWN</span>   <span class="operator">=</span>  <span class="number">0</span> &lt;&lt; COUNT_BITS;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">STOP</span>       <span class="operator">=</span>  <span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TIDYING</span>    <span class="operator">=</span>  <span class="number">2</span> &lt;&lt; COUNT_BITS;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TERMINATED</span> <span class="operator">=</span>  <span class="number">3</span> &lt;&lt; COUNT_BITS;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">mainLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br></pre></td></tr></table></figure>

<h3 id="å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°"><a href="#å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°" class="headerlink" title="å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°"></a>å¦‚ä½•æ§åˆ¶çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°</h3><p>é¦–å…ˆè¦å…³æ³¨å‡ ä¸ªé‡è¦çš„å­—æ®µï¼š</p>
<ul>
<li><code>private volatile int corePoolSize; // æ ¸å¿ƒæ± çš„å¤§å°</code>,åœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± ä¸­å¹¶æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…æœ‰ä»»åŠ¡åˆ°æ¥æ‰åˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œé™¤éè°ƒç”¨äº†prestartAllCoreThreads()æˆ–è€…prestartCoreThread()æ–¹æ³•ï¼Œä»è¿™2ä¸ªæ–¹æ³•çš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œæ˜¯é¢„åˆ›å»ºçº¿ç¨‹çš„æ„æ€ï¼Œå³åœ¨æ²¡æœ‰ä»»åŠ¡åˆ°æ¥ä¹‹å‰å°±åˆ›å»ºcorePoolSizeä¸ªçº¿ç¨‹æˆ–è€…ä¸€ä¸ªçº¿ç¨‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸º0ï¼Œå½“æœ‰ä»»åŠ¡æ¥ä¹‹åï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ°corePoolSizeåï¼Œå°±ä¼šæŠŠåˆ°è¾¾çš„ä»»åŠ¡æ”¾åˆ°ç¼“å­˜é˜Ÿåˆ—å½“ä¸­</li>
<li><code>private volatile int maxinumPoolSize; // çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°</code></li>
<li><code>private final BlockingQueue&lt;Runnable&gt; workQueue; // ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œç”¨å­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡</code></li>
<li><code>private final HashSet&lt;Worker&gt; workers = new HashSet&lt;Worker&gt;();</code> &#x2F;&#x2F; Set containing all worker threads in pool. Accessed only when holding mainLock.ï¼ˆå…¶ä¸­Worker åŒ…è£…äº†å…·ä½“è¦æ‰§è¡Œçš„ä»»åŠ¡å’Œæ‰§è¡Œè¯¥ä»»åŠ¡çš„çº¿ç¨‹ï¼‰</li>
</ul>
<p><code>ThreadPoolExecutor</code> ç±»å¤§ä½“å®ç°çš„æ€è·¯ï¼šå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å°äºæ ¸å¿ƒæ± <strong>corePoolSize</strong>æ—¶ï¼Œç›´æ¥åˆ›å»ºçº¿ç¨‹(é€šè¿‡Worker)æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œæ–¹æ³•ä¸º <code>addIfUnderCorePoolSize(command)</code>; å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒæ± corePoolSizeæ—¶ï¼ŒæŠŠä»»åŠ¡åŠ å…¥åˆ°ç¼“å­˜é˜Ÿåˆ—<code>workQueue.offer(command)</code>ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼šé€šè¿‡<code>getTask()</code> æ–¹æ³•è·å–</p>
<h3 id="executeæ–¹æ³•çš„å®ç°"><a href="#executeæ–¹æ³•çš„å®ç°" class="headerlink" title="executeæ–¹æ³•çš„å®ç°"></a>executeæ–¹æ³•çš„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">(Runnable command)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (command == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    <span class="keyword">if</span> (poolSize &gt;= corePoolSize || !addIfUnderCorePoolSize(command)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (runState == RUNNING &amp;&amp; workQueue.offer(command)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (runState != RUNNING || poolSize == <span class="number">0</span>)</span><br><span class="line">                ensureQueuedTaskHandled(command);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!addIfUnderMaximumPoolSize(command))</span><br><span class="line">            reject(command); <span class="comment">// is shutdown or saturated</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<p>é¦–å…ˆï¼Œåˆ¤æ–­æäº¤çš„ä»»åŠ¡commandæ˜¯å¦ä¸ºnullï¼Œè‹¥æ˜¯nullï¼Œåˆ™æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸</p>
<blockquote>
<p>æ¥ç€æ˜¯è¿™å¥ï¼Œè¿™å¥è¦å¥½å¥½ç†è§£ä¸€ä¸‹ï¼š<code>if (poolSize &gt;= corePoolSize || !addIfUnderCorePoolSize(command))</code>ç”±äºæ˜¯æˆ–æ¡ä»¶è¿ç®—ç¬¦ï¼Œæ‰€ä»¥å…ˆè®¡ç®—å‰åŠéƒ¨åˆ†çš„å€¼ï¼Œå¦‚æœçº¿ç¨‹æ± ä¸­å½“å‰çº¿ç¨‹æ•°ä¸å°äºæ ¸å¿ƒæ± å¤§å°ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥è¿›å…¥ä¸‹é¢çš„ifè¯­å¥å—äº†<br><br>å¦‚æœçº¿ç¨‹æ± ä¸­<strong>å½“å‰çº¿ç¨‹æ•°å°äºæ ¸å¿ƒæ± å¤§å°</strong>ï¼Œåˆ™æ¥ç€æ‰§è¡ŒååŠéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œ<code>addIfUnderCorePoolSize(command)</code>å¦‚æœæ‰§è¡Œå®Œ<code>addIfUnderCorePoolSize</code>è¿™ä¸ªæ–¹æ³•è¿”å›falseï¼Œåˆ™ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ifè¯­å¥å—ï¼Œå¦åˆ™æ•´ä¸ªæ–¹æ³•å°±ç›´æ¥æ‰§è¡Œå®Œæ¯•äº†<br><br>å¦‚æœæ‰§è¡Œå®Œ<code>addIfUnderCorePoolSize</code>è¿™ä¸ªæ–¹æ³•è¿”å›falseï¼Œç„¶åæ¥ç€åˆ¤æ–­ï¼š<code>if (runState == RUNNING &amp;&amp; workQueue.offer(command))</code>å¦‚æœå½“å‰çº¿ç¨‹æ± å¤„äºRUNNINGçŠ¶æ€ï¼Œåˆ™å°†ä»»åŠ¡æ”¾å…¥ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼›å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸å¤„äºRUNNINGçŠ¶æ€æˆ–è€…ä»»åŠ¡æ”¾å…¥ç¼“å­˜é˜Ÿåˆ—å¤±è´¥ï¼Œåˆ™æ‰§è¡Œï¼š<code>addIfUnderMaximumPoolSize(command)</code>å¦‚æœæ‰§è¡Œ<code>addIfUnderMaximumPoolSize</code>æ–¹æ³•å¤±è´¥ï¼Œåˆ™æ‰§è¡Œ<code>reject()</code>æ–¹æ³•è¿›è¡Œä»»åŠ¡æ‹’ç»å¤„ç†<br><br>å›åˆ°å‰é¢ <code>if (runState == RUNNING &amp;&amp; workQueue.offer(command))</code>è¿™å¥çš„æ‰§è¡Œï¼Œå¦‚æœè¯´å½“å‰çº¿ç¨‹æ± å¤„äºRUNNINGçŠ¶æ€ä¸”å°†ä»»åŠ¡æ”¾å…¥ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—æˆåŠŸï¼Œåˆ™ç»§ç»­è¿›è¡Œåˆ¤æ–­ï¼š<br><code>if (runState != RUNNING || poolSize == 0)</code><br>è¿™å¥åˆ¤æ–­æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å°†æ­¤ä»»åŠ¡æ·»åŠ è¿›ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—çš„åŒæ—¶å…¶ä»–çº¿ç¨‹çªç„¶è°ƒç”¨shutdownæˆ–è€…shutdownNowæ–¹æ³•å…³é—­äº†çº¿ç¨‹æ± çš„ä¸€ç§åº”æ€¥æªæ–½ã€‚å¦‚æœæ˜¯è¿™æ ·å°±æ‰§è¡Œï¼š<code>ensureQueuedTaskHandled(command)</code>è¿›è¡Œåº”æ€¥å¤„ç†ï¼Œä»åå­—å¯ä»¥çœ‹å‡ºæ˜¯ä¿è¯ æ·»åŠ åˆ°ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å¾—åˆ°å¤„ç†ã€‚</p>
</blockquote>
<p>æ¥ä¸‹é‡Œé‡ç‚¹å…³æ³¨ <code>addIfUnderCorePoolSize(Runnable firstTask)</code> æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">addIfUnderCorePoolSize</span><span class="params">(Runnable firstTask)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">mainLock</span> <span class="operator">=</span> <span class="built_in">this</span>.mainLock;</span><br><span class="line">    mainLock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (poolSize &lt; corePoolSize &amp;&amp; runState == RUNNING)</span><br><span class="line">            t = addThread(firstTask);   </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        mainLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (t == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    t.start();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¯¥æ–¹æ³•ä¸­é€šè¿‡ addThread(firstTask) æŠŠå¾…æ‰§è¡Œçš„ä»»åŠ¡äº¤ç»™ Thread å¯¹è±¡ï¼Œç„¶åé€šè¿‡ <code>t.start()</code> å¯åŠ¨çº¿ç¨‹ï¼Œç­‰å¾…ä»»åŠ¡æ‰§è¡Œ</p>
<p>é‚£ä¹ˆé¡ºç€ä»£ç æ‰§è¡Œï¼Œä¸‹é¢å…³æ³¨ä¸€ä¸‹<code>addThread(Runnable command)</code> æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Thread <span class="title function_">addThread</span><span class="params">(Runnable firstTask)</span> &#123;</span><br><span class="line">    <span class="type">Worker</span> <span class="variable">w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Worker</span>(firstTask);</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> threadFactory.newThread(w);  <span class="comment">//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œä»»åŠ¡   </span></span><br><span class="line">    <span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">        w.thread = t;            <span class="comment">//å°†åˆ›å»ºçš„çº¿ç¨‹çš„å¼•ç”¨èµ‹å€¼ä¸ºwçš„æˆå‘˜å˜é‡       </span></span><br><span class="line">        workers.add(w);</span><br><span class="line">        <span class="type">int</span> <span class="variable">nt</span> <span class="operator">=</span> ++poolSize;     <span class="comment">//å½“å‰çº¿ç¨‹æ•°åŠ 1       </span></span><br><span class="line">        <span class="keyword">if</span> (nt &gt; largestPoolSize)</span><br><span class="line">            largestPoolSize = nt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬çŸ¥é“äº†æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹å’Œçº¿ç¨‹æ± æ˜¯é€šè¿‡ <code>Worker</code> å’Œ <code>HashSet&lt;Worker&gt;</code> æ¥å°è£…æ‰§è¡Œï¼Œæ‰€ä»¥æ¥ä¸‹å…³æ³¨ <code>Worker</code> çš„<code>run</code>æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Runnable</span> <span class="variable">task</span> <span class="operator">=</span> firstTask;</span><br><span class="line">            firstTask = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> (task != <span class="literal">null</span> || (task = getTask()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                runTask(task);</span><br><span class="line">                task = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            workerDone(<span class="built_in">this</span>);          </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ä»runæ–¹æ³•çš„å®ç°å¯ä»¥çœ‹å‡ºï¼Œå®ƒé¦–å…ˆæ‰§è¡Œçš„æ˜¯é€šè¿‡æ„é€ å™¨ä¼ è¿›æ¥çš„ä»»åŠ¡firstTaskï¼Œåœ¨è°ƒç”¨runTask()æ‰§è¡Œå®ŒfirstTaskä¹‹åï¼Œåœ¨whileå¾ªç¯é‡Œé¢ä¸æ–­é€šè¿‡<code>getTask()</code>å»å–æ–°çš„ä»»åŠ¡æ¥æ‰§è¡Œï¼Œé‚£ä¹ˆå»å“ªé‡Œå–å‘¢ï¼Ÿè‡ªç„¶æ˜¯ä»ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—é‡Œé¢å»å–ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸å·§å¦™çš„è®¾è®¡ï¼Œå‡å¦‚æˆ‘ä»¬æ¥è®¾è®¡çº¿ç¨‹æ± ï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªä»»åŠ¡åˆ†æ´¾çº¿ç¨‹ï¼Œå½“å‘ç°æœ‰çº¿ç¨‹ç©ºé—²æ—¶ï¼Œå°±ä»ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­å–ä¸€ä¸ªä»»åŠ¡äº¤ç»™ç©ºé—²çº¿ç¨‹æ‰§è¡Œã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œå¹¶æ²¡æœ‰é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šè¦é¢å¤–åœ°å¯¹ä»»åŠ¡åˆ†æ´¾çº¿ç¨‹è¿›è¡Œç®¡ç†ï¼Œæ— å½¢åœ°ä¼šå¢åŠ éš¾åº¦å’Œå¤æ‚åº¦ï¼Œè¿™é‡Œ<strong>ç›´æ¥è®©æ‰§è¡Œå®Œä»»åŠ¡çš„çº¿ç¨‹å»ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—é‡Œé¢å–ä»»åŠ¡æ¥æ‰§è¡Œ</strong></p>
<p>Worker çš„ run æ–¹æ³•è°ƒç”¨äº† <code>runTask(task)</code> æ–¹æ³•æ¥æœ€ç»ˆæ‰§è¡Œä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å†çœ‹ä¸‹è¯¥æ–¹æ³•çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">runTask</span><span class="params">(Runnable task)</span> &#123;</span><br><span class="line">       <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">runLock</span> <span class="operator">=</span> <span class="built_in">this</span>.runLock;</span><br><span class="line">       runLock.lock();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (runState &lt; STOP &amp;&amp;</span><br><span class="line">               Thread.interrupted() &amp;&amp;</span><br><span class="line">               runState &gt;= STOP)</span><br><span class="line">           <span class="type">boolean</span> <span class="variable">ran</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">           beforeExecute(thread, task);         </span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               task.run();</span><br><span class="line">               ran = <span class="literal">true</span>;</span><br><span class="line">               afterExecute(task, <span class="literal">null</span>);</span><br><span class="line">               ++completedTasks;</span><br><span class="line">           &#125; <span class="keyword">catch</span> (RuntimeException ex) &#123;</span><br><span class="line">               <span class="keyword">if</span> (!ran)</span><br><span class="line">                   afterExecute(task, ex);</span><br><span class="line">               <span class="keyword">throw</span> ex;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           runLock.unlock();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°ä»£ç é‡Œçš„ <code>task.run()</code> æˆ‘ä»¬æ€»ç®—å¯ä»¥æ¾ä¸€å£æ°”äº†ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ä»»åŠ¡å®é™…è¦æ‰§è¡Œçš„ä»£ç </p>
<p>æ€»ç»“ä¸€ä¸‹ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼šé€šè¿‡æŠŠä»»åŠ¡æäº¤ç»™ ThreadPoolExecutor çš„ execute(Runnable) æ–¹æ³•ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ Worker å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†æ‰§è¡Œè¯¥ä»»åŠ¡çš„çº¿ç¨‹ï¼Œé€šè¿‡åœ¨è¯¥å¯¹è±¡ <code>run()</code> æ–¹æ³•è·å–è¦æ‰§è¡Œçš„ä»»åŠ¡(åŒ…æ‹¬é€šè¿‡ <code>getTask()</code> æ–¹æ³•ä»é˜Ÿåˆ—ä¸­å»å–)ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨ <code>runTask(task)</code>æ¥æ‰§è¡Œä»»åŠ¡çš„ä»£ç (task.run())</p>
<h3 id="åˆ›å»ºçº¿ç¨‹æ± "><a href="#åˆ›å»ºçº¿ç¨‹æ± " class="headerlink" title="åˆ›å»ºçº¿ç¨‹æ± "></a>åˆ›å»ºçº¿ç¨‹æ± </h3><p>æå€¡ç›´æ¥ä½¿ç”¨ThreadPoolExecutorçš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>Executors</code>ç±»ä¸­æä¾›çš„å‡ ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼ˆExecutors æ–¹æ³•ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰å‘ï¼Œåé¢ä¼šä¸“é—¨ä»‹ç»ï¼‰</p>
<h3 id="workQueueçš„æ’é˜Ÿç­–ç•¥"><a href="#workQueueçš„æ’é˜Ÿç­–ç•¥" class="headerlink" title="workQueueçš„æ’é˜Ÿç­–ç•¥"></a>workQueueçš„æ’é˜Ÿç­–ç•¥</h3><p>workQueueçš„ç±»å‹ä¸ºBlockingQueue<Runnable>ï¼Œé€šå¸¸å¯ä»¥å–ä¸‹é¢ä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li>ArrayBlockingQueueï¼šåŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°</li>
<li>LinkedBlockingQueueï¼šåŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œå¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸ºInteger.MAX_VALUE</li>
<li>synchronousQueueï¼šè¿™ä¸ªé˜Ÿåˆ—æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚</li>
</ul>
<p><strong>å…·ä½“çš„å†…å®¹åœ¨ java.util.concurrent.ThreadPoolExecutor API æ–‡æ¡£ä¸­è¯´çš„å¾ˆæ¸…æ¥šï¼Œæ¯”å¦‚ä½¿ç”¨ ArrayBlockingQueue æ—¶ï¼Œå¦‚ä½•åœ¨ queue size å’Œ maximum pool size ä¹‹é—´ä½œ trade offï¼Œå»ºè®®å»ä»”ç»†çœ‹ä¸€ä¸‹</strong></p>
<p>ä»¥ä¸Šå°±æ˜¯å…³äºä¸€ä¸ªçº¿ç¨‹æ± å®ç°åŸç†çš„ä¸»è¦è®²è¿°ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰è¯´ï¼Œæ¯”å¦‚å¦‚ä½•é€šè¿‡é”å¤„ç†çº¿ç¨‹å¹¶å‘ï¼Œå»ºè®®å»çœ‹æºç å’Œæ³¨é‡Šã€‚</p>
<hr>
<p><strong>æ¨èé˜…è¯»ï¼š</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/dolphin0520/p/3932921.html">Javaå¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹æ± çš„ä½¿ç”¨</a></li>
</ul>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>Java çº¿ç¨‹æ± å®ç°åŸç†</p><p><span>æ–‡ç« ä½œè€…ï¼š</span>Ryan</p><p><span>åŸå§‹é“¾æ¥ï¼š</span><a href="/2022/11/02/Java-çº¿ç¨‹æ± å®ç°åŸç†/">https://0x80x17.tech/2022/11/02/Java-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://0x80x17.tech/2022/11/02/Java-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"></i></span></p><p><span>ç‰ˆæƒå£°æ˜ï¼š</span>è½¬è½½æˆ–å¼•ç”¨è¯·æ³¨æ˜æœ¬æ–‡é“¾æ¥ğŸ”—</p></div><br><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B-%E5%B9%B6%E5%8F%91/" rel="tag">çº¿ç¨‹&amp;å¹¶å‘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1/" rel="tag">è®¾è®¡</a></li></ul></div><div class="post-nav"><a class="pre" href="/2022/11/13/Visitor-Pattern-Tutorial/">Visitor Pattern Tutorial</a><a class="next" href="/2022/10/11/Redis-Cluster%E6%89%A9%E5%B1%95%E6%80%A7%E5%92%8C%E5%8F%AF%E7%94%A8%E6%80%A7%E8%AE%BE%E8%AE%A1/">Redis Clusteræ‰©å±•æ€§å’Œå¯ç”¨æ€§è®¾è®¡</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://0x80x17.tech"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img class="nofancybox" src="/img/avatar.png"/></a><p>A Lean Coder.</p></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">è®¾è®¡</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">åˆ†å¸ƒå¼ç³»ç»Ÿ</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 15px;">ç¿»è¯‘</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">å·¥å…·</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/%E7%BA%BF%E7%A8%8B-%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">çº¿ç¨‹&å¹¶å‘</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 15px;">è™šæ‹Ÿæœº</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/" style="font-size: 15px;">æ•°æ®ç»“æ„&ç®—æ³•</a> <a href="/tags/%E7%BB%8F%E9%AA%8C%E6%95%99%E8%AE%AD/" style="font-size: 15px;">ç»éªŒæ•™è®­</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 15px;">è¯­æ³•</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" style="font-size: 15px;">æ•°æ®å­˜å‚¨</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 15px;">ä¸­é—´ä»¶</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">ç½‘ç»œ</a> <a href="/tags/JS/" style="font-size: 15px;">JS</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 15px;">å®‰å…¨</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 15px;">ä¼˜åŒ–</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2023/07/09/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">ä½å›¾ä¸å¸ƒéš†è¿‡æ»¤å™¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/06/01/%E5%85%B3%E4%BA%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">å…³äºè´Ÿè½½å‡è¡¡</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/17/%E5%85%B3%E4%BA%8E-Skip-list/">å…³äº Skip list</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/30/%E7%86%94%E6%96%AD-%E9%99%8D%E7%BA%A7/">ç†”æ–­&é™çº§</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/19/%E5%85%B3%E4%BA%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">å…³äºæµé‡æ§åˆ¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/03/%E8%81%8A%E8%81%8A%E5%B9%82%E7%AD%89/">èŠèŠå¹‚ç­‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/19/Java-ThreadLocal%E8%A7%A3%E6%9E%90-2/">Java ThreadLocalè§£æ(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/12/Java-ThreadLocal%E8%A7%A3%E6%9E%90-1/">Java ThreadLocalè§£æ(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/01/15/Java-AQS%E8%A7%A3%E6%9E%90-2/">Java AQSè§£æ(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/01/09/Java-AQS%E8%A7%A3%E6%9E%90-1/">Java AQSè§£æ(1)</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2023 <a href="/." rel="nofollow">0x80x17.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>