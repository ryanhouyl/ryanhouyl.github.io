<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>0x80x17 | hello, world:)</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 7.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">0x80x17</h1><a id="logo" href="/.">0x80x17</a><p class="description">hello, world:)</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2023/09/07/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">位图与布隆过滤器</a></h1><div class="post-meta">2023-09-07</div><div class="post-content"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>如何对爬虫爬取的网页链接进行去重？</p>
<p>最容易想到的方法就是记录爬取的网页链接，在爬取一个新链接时，我们先判断该链接是否已经被记录，如果已经记录就不再爬取。这就要求我们选择一种<strong>能够快速新增和查询记录的动态数据结构</strong>。</p>
<p>满足这些条件的数据结构有哪些呢？显然，<code>哈希表、红黑树、跳表</code>这些动态数据结构，都能支持快速地插入、查找数据，但是在内存消耗方面，是否可以接受呢？</p>
<h2 id="使用哈希表"><a href="#使用哈希表" class="headerlink" title="使用哈希表"></a>使用哈希表</h2><p>以哈希表为例，假设我们要爬取 10 亿个网页（像 Google、百度这样的通用搜索引擎，爬取的网页可能会更多），为了判重，我们把这 10 亿网页链接存储在哈希表中。我们来估算下，大约需要多少内存？</p></div><p class="readmore"><a href="/2023/09/07/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/08/11/%E5%85%B3%E4%BA%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">关于负载均衡</a></h1><div class="post-meta">2023-08-11</div><div class="post-content"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>随着互联网应用的不断发展，单台服务器性能无法满足当前的请求量，如何解决？</p>
<ul>
<li><p>scale up</p>
<p>  垂直扩展，增强单机性能。用更好的服务器，更好的硬件设备</p>
</li>
<li><p>scale out</p>
<p>  但是单台服务器性能的提升始终存在天花板，最终还是需要通过增加机器，水平扩展的方式来满足日益增长的请求量</p>
</li>
</ul>
<p>那么问题来了，当多台机器同时对外提供服务时，如何保证请求能均匀的打到每台服务器上呢，如果某台服务器存在故障，如何保证请求不会打到该服务器？为了解决这个问题，我们需要引入一个在分布式系统中非常重要的中间层，负载均衡层。</p></div><p class="readmore"><a href="/2023/08/11/%E5%85%B3%E4%BA%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/07/24/%E5%85%B3%E4%BA%8E-Skip-list/">关于 Skip list</a></h1><div class="post-meta">2023-07-24</div><div class="post-content"><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p><strong>用空间换时间</strong>的设计思路来实现的动态数据结构，通过构建多级索引来提高查询的效率，实现了<strong>基于链表的“二分查找”</strong>。支持快速地插入、删除、查找操作，时间复杂度都是<code>O(logn)</code>。</p>
<p>跳表的空间复杂度是 O(n)。不过，跳表的实现非常灵活，可以通过改变索引构建策略，有效平衡执行效率和内存消耗</p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p><strong>二分查找</strong>底层依赖的是数组随机访问的特性，所以只能用数组来实现。如果数据存储在有序链表中，就真的没法用二分查找算法了吗？</p></div><p class="readmore"><a href="/2023/07/24/%E5%85%B3%E4%BA%8E-Skip-list/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/05/05/%E5%85%B3%E4%BA%8E%E5%A4%9A%E6%80%81/">关于多态</a></h1><div class="post-meta">2023-05-05</div><div class="post-content"><h2 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h2><p>多态并没有一个严格的定义，维基百科上给它下的定义比较宽松：</p>
<blockquote>
<p>Subtype polymorphism, almost universally called just polymorphism in the context of object-oriented programming, is the ability of one type, A, to appear as and be used like another type, B.</p>
</blockquote>
<h2 id="子类与子类型"><a href="#子类与子类型" class="headerlink" title="子类与子类型"></a>子类与子类型</h2><p>子类是一个语法层面上的词，只要满足继承的语法，就存在子类关系</p>
<p>子类型更强调语义，需要满足里氏代换原则</p>
<p>子类型比子类有更严格的要求，它不仅要求有继承的语法，同时要求如果存在子类对父类方法的重写(override)，那么改写的内容必须符合父类原本的语义，其被调用后的作用应该和父类实现的效果方向一致</p>
<p>对二者的对比是想强调一点: 只有保证子类都是子类型，多态才有意义</p></div><p class="readmore"><a href="/2023/05/05/%E5%85%B3%E4%BA%8E%E5%A4%9A%E6%80%81/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/04/30/%E7%86%94%E6%96%AD-%E9%99%8D%E7%BA%A7/">熔断&amp;降级</a></h1><div class="post-meta">2023-04-30</div><div class="post-content"><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>微服务架构中常见的两种<strong>有损的服务保护策略</strong>，它们都是通过暂时关闭某些非核心服务或者组件从而屏蔽非核心系统故障的影响，<strong>保护核心系统的可用性</strong></p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>由于依赖的资源或者服务不可用，最终导致整体服务宕机。举例来说，在你的电商系统中就可能由于数据库访问缓慢，导致整体服务不可用</p>
<p><strong>局部故障最终导致全局故障，这种情况有一个专业的名词，叫做“雪崩”</strong></p></div><p class="readmore"><a href="/2023/04/30/%E7%86%94%E6%96%AD-%E9%99%8D%E7%BA%A7/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/04/19/%E5%85%B3%E4%BA%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">关于流量控制</a></h1><div class="post-meta">2023-04-19</div><div class="post-content"><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>限流指的是通过限制到达系统的并发请求数量，保证系统能够正常响应部分用户请求，而对于超过限制的流量，则只能通过拒绝服务的方式<strong>保证整体系统的可用性</strong></p>
<h3 id="流量控制的维度"><a href="#流量控制的维度" class="headerlink" title="流量控制的维度"></a>流量控制的维度</h3><p>无论是在一体化架构还是微服务化架构中，我们对流量控制存在多个维度，比如：</p>
<ul>
<li>可以对系统整体每分钟处理多少请求做出限制</li>
<li>可以针对单个接口设置每分钟请求流量的限制</li>
<li>可以限制单个 IP、用户 ID 或者设备 ID 在一段时间内发送请求的数量</li>
<li>对于服务于多个第三方应用的开放平台来说，每一个第三方应用对于平台方来说都有一个唯一的 appkey 来标识，那么你也可以限制单个 appkey 的访问接口的速率</li>
</ul></div><p class="readmore"><a href="/2023/04/19/%E5%85%B3%E4%BA%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/03/03/%E8%81%8A%E8%81%8A%E5%B9%82%E7%AD%89/">聊聊幂等</a></h1><div class="post-meta">2023-03-03</div><div class="post-content"><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>什么是幂等（Idempotency）？简单来说，<strong>一个操作如果具有任意多次执行所产生的影响均与一次执行的影响相同</strong>，我们就称之为幂等（这里的操作可以是对外提供的 HTTP 接口，RPC 接口，也可以是接收消息的内部接口，甚至是一个内部方法）</p>
<p>这样的定义，其实是一个语义范畴对行为结果的定义。如何用语法和规则去确保行为能达到这个结果，往往需要很谨慎的设计和实现。</p>
<h3 id="为什么"><a href="#为什么" class="headerlink" title="为什么"></a>为什么</h3><p>我们为什么需要考虑幂等，或者说幂等为什么重要？</p></div><p class="readmore"><a href="/2023/03/03/%E8%81%8A%E8%81%8A%E5%B9%82%E7%AD%89/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/02/19/Java-ThreadLocal%E8%A7%A3%E6%9E%90-2/">Java ThreadLocal解析(2)</a></h1><div class="post-meta">2023-02-19</div><div class="post-content"><p>前面写的关于ThreadLocal的文章<a href="https://0x80x17.tech/2023/02/12/Java-ThreadLocal%E8%A7%A3%E6%9E%90-1/">Java ThreadLocal解析(1)</a>，主要从ThreadLocal的一些基本知识和代码实现思路来整理，本文将试着从更加深入的角度来看ThreadLocal以及在使用TreadLocal 中遇到的一些坑。</p>
<h3 id="设计初衷"><a href="#设计初衷" class="headerlink" title="设计初衷"></a>设计初衷</h3><p>一句话：<strong>提供线程内部的局部变量，在本线程内随时随地可取，隔离其他线程。</strong></p>
<p>稍微展开来说一点，ThreadLocal的作用是提供线程内的局部变量 (类比方法的局部变量)，这种变量在自身线程的生命周期内起作用（其他线程访问不到），减少同一个线程内多个函数或者组件之间一些公共变量的传递的复杂度（同时隔离了多个线程）。</p>
<p>从上面的设计初衷，我们不难得出ThreadLocal的使用场景：</p></div><p class="readmore"><a href="/2023/02/19/Java-ThreadLocal%E8%A7%A3%E6%9E%90-2/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/02/12/Java-ThreadLocal%E8%A7%A3%E6%9E%90-1/">Java ThreadLocal解析(1)</a></h1><div class="post-meta">2023-02-12</div><div class="post-content"><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>这个类的名字已经很清楚的告诉我们该类的作用了，即<code>线程局部变量</code>，可以类比一般的局部变量，<code>ThreadLocal</code>说明了该局部变量的上下文环境为<code>Thread</code>，即每个线程都有一个互不影响的变量，可以通过<code>get()</code>或者<code>set(T value)</code>等方法分别操作自己的变量副本，而对其他的线程操作保持封闭</p>
<h3 id="为什么"><a href="#为什么" class="headerlink" title="为什么"></a>为什么</h3><p>那么为什么需要使用ThreadLocal呢？可以考虑这样两个场景：</p>
<ul>
<li>在同一个线程中的多个函数需要操作相同的数据，怎么处理？一种比较直接的方式就是通过在多个函数之间进行参数的传递，但是这种方式需要给每个参与的方法都增加一个参数，这并不优雅</li>
<li>针对上面的问题，我们可以提供一个全局变量供所有的函数访问，但是在多线程环境下，需要进行同步处理</li>
</ul></div><p class="readmore"><a href="/2023/02/12/Java-ThreadLocal%E8%A7%A3%E6%9E%90-1/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2023/01/15/Java-AQS%E8%A7%A3%E6%9E%90-2/">Java AQS解析(2)</a></h1><div class="post-meta">2023-01-15</div><div class="post-content"><p>接着上一篇关于AQS的文章 <a href="https://0x80x17.tech/2023/01/09/Java-AQS%E8%A7%A3%E6%9E%90-1/">Java AQS解析(1)</a> 继续分析，接下来是AQS框架的第二个重要组成部分。</p>
<h3 id="Blocking"><a href="#Blocking" class="headerlink" title="Blocking"></a>Blocking</h3><p>在 JSR166 之前，除了基于内置的 monitor 的方法外(wait&#x2F;notify)，Java 没有可用的API用于线程阻塞和唤醒操作来实现同步器。唯一可用的备选方案是 <code>Thread.suspend</code> 和 <code>Thread.resume</code>，但是这两个方法在遇到竞态问题时会出现无法解决的问题，比如：当一个当前未被阻塞的线程在一个线程执行 <code>suspend</code> 方法之前调用 <code>resume</code>  方法，那么这个 <code>resume</code> 方法将没有任何效果(后面提到的 LockSupport 通过给每个线程引入一个permit解决了这个问题)</p></div><p class="readmore"><a href="/2023/01/15/Java-AQS%E8%A7%A3%E6%9E%90-2/">阅读全文</a></p></div><nav class="page-navigator"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">下一页</a></nav><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async></script></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://0x80x17.tech"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="关于"><img class="nofancybox" src="/img/avatar.png"/></a><p>A Lean Coder.</p></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">设计</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">分布式系统</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 15px;">翻译</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">工具</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 15px;">虚拟机</a> <a href="/tags/%E7%BA%BF%E7%A8%8B-%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">线程&并发</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/" style="font-size: 15px;">数据结构&算法</a> <a href="/tags/%E7%BB%8F%E9%AA%8C%E6%95%99%E8%AE%AD/" style="font-size: 15px;">经验教训</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 15px;">语法</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 15px;">中间件</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" style="font-size: 15px;">数据存储</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/JS/" style="font-size: 15px;">JS</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 15px;">安全</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 15px;">优化</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2023/09/07/%E4%BD%8D%E5%9B%BE%E4%B8%8E%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8/">位图与布隆过滤器</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/08/11/%E5%85%B3%E4%BA%8E%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">关于负载均衡</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/07/24/%E5%85%B3%E4%BA%8E-Skip-list/">关于 Skip list</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/05/%E5%85%B3%E4%BA%8E%E5%A4%9A%E6%80%81/">关于多态</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/30/%E7%86%94%E6%96%AD-%E9%99%8D%E7%BA%A7/">熔断&降级</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/19/%E5%85%B3%E4%BA%8E%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/">关于流量控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/03/%E8%81%8A%E8%81%8A%E5%B9%82%E7%AD%89/">聊聊幂等</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/19/Java-ThreadLocal%E8%A7%A3%E6%9E%90-2/">Java ThreadLocal解析(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/12/Java-ThreadLocal%E8%A7%A3%E6%9E%90-1/">Java ThreadLocal解析(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/01/15/Java-AQS%E8%A7%A3%E6%9E%90-2/">Java AQS解析(2)</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">0x80x17.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="复制成功！"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>